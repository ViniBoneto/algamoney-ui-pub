<div class="container">
  <div class="p-grid">
    <div class="p-col-12">
      <h1>Lançamentos</h1>
    </div>

    <!-- 17.3. Adicionando filtro por descrição na pesquisa de lançamentos:
      Envolve os campos do form de filtro num elem <form> e liga o evento de submissão de dados do
      ngForm (ngSubmit) ao método pesquisar() do comp, p/ q filtros de lançamento funcionem. Vide mód
      12 do curso (Formulários e validação) p/ mais infos sobre ngForms. -->
    <form autocomplete="off" (ngSubmit)="pesquisar()">
      <!-- C/ p-fluid no comp pai, filhos ocupam 100% larg pai  -->
      <div class="p-col-12 p-fluid">
        <label>Descrição</label>
        <!-- Adiciona dir pInputText ao input[type="text"] p/ adicionar estilos e funcs do PrimeNG.
          Dir do PrimeNG pTooltip exibe uma msg de ajuda (tooltip text) relacionada ao elem -->
        <!-- <input pInputText type="text" pTooltip="Filtro por descrição lançamento"> -->

        <!-- 17.3. Adicionando filtro por descrição na pesquisa de lançamentos:
          Liga o campo de descr lançamento à prop do comp através de 2 way databind. Tb é necessário q tds
          os campos do form de filtro sejam envoltos num elem <form> e tenham a prop nome, p/ serem mapeados
          no ngForm. Vide mód 12 do curso (Formulários e validação). -->
        <!-- <input pInputText type="text" pTooltip="Filtro por descrição lançamento"
          name="descricao" [(ngModel)]="descricao"> -->

        <!-- 17.5. Implementando a paginação no serviço de lançamentos:
          Ao invés de continuarem mapeados às props individuais de filtro, campos equivalentes do html serão
          mapeados às props internas da prop do tipo LancamentoFiltro. -->
        <input pInputText type="text" pTooltip="Filtro por descrição lançamento"
          name="descricao" [(ngModel)]="filtro.descricao">
      </div>

      <div class="p-col-12">
        <!-- Mudando display do lbl de "inline" pra "block" há quebra de linha e d+ elems vão pra baixo -->
        <label style="display: block;">Vencimento</label>
        <!-- <input pInputText type="text" style="width: 100px;" pTooltip="Filtro por data mínima vencimento lançamento"> -->

        <!-- 17.4. Adicionando filtro por datas na pesquisa de lançamentos:
          Liga os campos de dts venc max e min lançamento às props do comp através de 2 way databind (similar ao feito
          com campo descr). Coloca comps calendários do PNG no lugar dos campos de txt simples.

          Ajusta o estilo apenas da caixa de txt do calendário, via prop [inputStyle], p/ ter a msm larg q a caixa de
            txt anterior tinha (100px). Tb ajusta o estilo geral o calendaŕio p/ dar 10px de margem inf, através da prop
            [style]. -->
        <!-- <p-calendar [(ngModel)]="dataVencimentoIni" dateFormat="dd/mm/yy" [inputStyle]="{ width: '100px' }"
          name="dataVencimentoIni" [style]="{ 'margin-bottom': '10px' }" pTooltip="Filtro por data mínima vencimento lançamento">
        </p-calendar> -->

        <!-- 17.5. Implementando a paginação no serviço de lançamentos:
          Ao invés de continuarem mapeados às props individuais de filtro, campos equivalentes do html serão
          mapeados às props internas da prop do tipo LancamentoFiltro. -->
        <p-calendar [(ngModel)]="filtro.dataVencimentoIni" dateFormat="dd/mm/yy" [inputStyle]="{ width: '100px' }"
          name="dataVencimentoIni" [style]="{ 'margin-bottom': '10px' }" pTooltip="Filtro por data mínima vencimento lançamento">
        </p-calendar>

        &nbsp;<label>Até</label>&nbsp;
        <!-- <input pInputText type="text" style="width: 100px;" pTooltip="Filtro por data máxima vencimento lançamento"> -->

        <!-- <p-calendar [(ngModel)]="dataVencimentoFim" dateFormat="dd/mm/yy" [inputStyle]="{ width: '100px' }"
          name="dataVencimentoFim" [style]="{ 'margin-bottom': '10px' }" pTooltip="Filtro por data máxima vencimento lançamento">
        </p-calendar> -->

        <p-calendar [(ngModel)]="filtro.dataVencimentoFim" dateFormat="dd/mm/yy" [inputStyle]="{ width: '100px' }"
          name="dataVencimentoFim" [style]="{ 'margin-bottom': '10px' }" pTooltip="Filtro por data máxima vencimento lançamento">
        </p-calendar>
      </div>

      <div class="p-col-12">
        <!-- Adiciona dir pButton ao <button> p/ adicionar estilos e funcs do PrimeNG -->
        <button pButton type="submit" label="Pesquisar"></button>
      </div>
    </form>
  </div>

  <div class="p-grid">
    <div class="p-col-12">
      <!-- <ul>
        <li *ngFor="let l of lancamentos">{{ l.pessoa }}</li>
      </ul> -->

      <!-- A dir *ngFor, explícita no exemp acima (comentado), está implícita na tabela do Prime NG.
        Para ativar a paginação básica, basta ativar a prop "paginator" e especificar o núm de lins p/
        pág c/ a prop "rows".
        Para tornar nossa tabela responsiva no PrimeNG 10, primeiramente utilizamos o mesmo atributo mostrado
        na aula (10.9): "responsive". Além disso, precisamos adicionar a informação de cabeçalho no template
        "body", pois ele que será exibido nos dispositivos de menor resolução. O cabeçaho no corpo da tabela
        deve ser adicionado com a classe CSS .p-column-title .
      -->
      <!-- <p-table [value]="lancamentos" [paginator]="true" [rows]="3" [responsive]="true">
        <ng-template pTemplate="header">
            <tr>
                <th>Pessoa</th>
                <th>Descrição</th>
                <th class="col-data-header">Vencimento</th>
                <th class="col-data-header">Pagamento</th>
                <th class="col-valor-header">Valor</th> -->
                <!-- Apenas teste p/ mostrar header c/ um btn em vez de um lbl -->
                <!-- <th class="col-valor-header"><button pButton label="Teste"></button></th> -->
                <!-- <th class="col-acoes-header"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-lancamento>
            <tr>
                <td>
                  <span class="p-column-title">Pessoa</span>
                  {{ lancamento.pessoa }}
                </td>
                <td>
                  <span class="p-column-title">Descrição</span>
                  {{ lancamento.descricao }}
                </td> -->
                <!-- 11.8. Desafio: usando pipes: alterar campos de data de str p/ Date, usando DatePipe no template p/ conseguir
                  deixá-la no msm formato que estava na str (dd/MM/yyyy). Também usar CurrencyPipe no template p/ conseguir
                  deixar campo val formatado em Real (R$). -->
                <!-- <td class="col-data-content">
                  <span class="p-column-title">Vencimento</span> -->
                  <!-- {{ lancamento.dataVencimento }} -->
                  <!-- {{ lancamento.dataVencimento | date:"dd/MM/y" }}
                </td>
                <td class="col-data-content">
                  <span class="p-column-title">Pagamento</span> -->
                  <!-- {{ lancamento.dataPagamento }} -->
                  <!-- {{ lancamento.dataPagamento | date:"dd/MM/y" }}
                </td>
                <td class="col-valor-content">
                  <span class="p-column-title">Valor</span> -->
                  <!-- Dir ngStyle recebe um obj JS c/ params equivalentes às props CSS a serem aplicadas
                      inline no elem. Despesas são vermelhas e receitas azuis -->
                  <!-- <span [ngStyle]="{ color: lancamento.tipo === 'DESPESA' ? 'red' : 'blue' }">{{ lancamento.valor }}</span> -->

                  <!-- Opcionalmente, no caso de alteração de poucas props (no caso, há apenas 1), pode-se atribuir a expr JS
                    diretamente à prop CSS, como feito abaixo -->
                  <!-- <span [style.color]="lancamento.tipo === 'DESPESA' ? 'red' : 'blue'">{{ lancamento.valor }}</span> -->
                  <!-- <span [style.color]="lancamento.tipo === 'DESPESA' ? 'red' : 'blue'">{{ lancamento.valor | currency:"BRL" }}</span>
                </td> -->
                <!-- Adicona coluna c/ btns de edição (ícone caneta) e exclusão (ícone lixeira). Btn de edição será uma âncora (<a>)
                  e btn de exclusão será um <button>. Isso faz sentido, pois o btn de edição será uma navegação p/ uma outra página
                  (de edição lançamento), enquanto o btn de exclusão será apenas um disparador de ação (de exclusão). Ambos terão
                  a dir pButton p/ aplicar estilos e funcionalidades do Angular -->
                <!-- <td class="col-acoes-content">
                  <a pButton icon="pi pi-pencil" pTooltip="Editar" tooltipPosition="top"></a> -->
                  <!-- <span>&nbsp;&nbsp;</span> Espaço entre os ícones -->
                  <!-- <button pButton icon="pi pi-trash" pTooltip="Excluir" tooltipPosition="top"></button>
                </td>
            </tr>
        </ng-template>
      </p-table> -->

      <!-- 13.11. Desafio: criando mais componentes:
        Transplantando o grid da pág de pesquisa de lançamentos p/ um comp separado, afim de simplificar o cód
        daquela e tornar o cód do grid um comp reusável. -->
      <!-- <app-lancamentos-grid [lancamentos]="lancamentos"></app-lancamentos-grid> -->

      <!-- 17.6. Configurando a paginação lazy do PrimeNG:
        Insere props de entrada totRegs e itensPag no comp de grid de lançamentos, respectivamente c/ total de
        regs da consulta e itens p/ pág de consulta, a serem associadas às props totRegs e filtro.itensPagina,
        deste comp.

      Tb foi criado o evt de saída mudancaPagEvt, no grid de lançamentos, p/ avisar q uma nova pág foi selecionada
         no grid e uma nova pesquisa deve ser feita, no servidor, p/ trazer os regs relativos a esta pág. O arg passado
         p/ este evt de saída é o nº (ind) da pág a ser carregada. Esta será repassada ao método pesquisar(), p/ q seja
         feita a consulta p/ carregar os dados da pág selecionada. -->
      <!-- <app-lancamentos-grid [lancamentos]="lancamentos" [totRegs]="totRegs" [itensPag]="filtro.itensPagina"
        (mudancaPagEvt)="pesquisar($event)"></app-lancamentos-grid> -->

      <!-- 17.8. Excluindo lançamentos e o decorador @ViewChild:
        Foi criado o evt de saída exclusaoLancEvt, no grid de lançamentos, p/ avisar q um lançamento deve ser excluído.
        O lançamento a ser removido, contigo no arg do evto, é repassado p/ o método excluir().

      Tb Vamos usar o decorador @ViewChild, q é um decorador q configura uma consulta a um elem/comp filho na view,
        p/ ligar a prop local grid c/ o comp de grid de lançamentos no DOM, marcado c/ a var #gridLanc (esta var será
        usada p/ fazer a ligação, sendo atribuída à prop @ViewChild.selector).-->
      <!-- <app-lancamentos-grid [lancamentos]="lancamentos" [totRegs]="totRegs" [itensPag]="filtro.itensPagina"
        (mudancaPagEvt)="pesquisar($event)" (exclusaoLancEvt)="excluir($event)" #gridLanc></app-lancamentos-grid> -->

      <!-- 17.10. Adicionando diálogo de confirmação antes da exclusão:
        Temos que substituir o método a ser invocado no evt exclusaoLancEvt do grid: em vez de se invocar diretamente
        excluir(), deve-se invocar confirmarExclusao(), q mostrará a caixa de confirm. Somente se o usuário confirmar,
        o processo de exclusão seguirá. Senão será cancelado. -->
      <app-lancamentos-grid [lancamentos]="lancamentos" [totRegs]="totRegs" [itensPag]="filtro.itensPagina"
        (mudancaPagEvt)="pesquisar($event)" (exclusaoLancEvt)="confirmarExclusao($event)" #gridLanc>
      </app-lancamentos-grid>
    </div>
  </div>

  <div class="p-col-12">
    <!-- Dir pButton tb pode ser adicionada a uma âncora (<a>) -->
    <a pButton label="Novo lançamento"></a>
  </div>
</div>
